{% extends 'base.html' %}
{% load static %}

{% block title %} ChatApp | tOm {% endblock %}

{% block content %}
<div align="center">
    <h2>Django Chat</h2>
</div>


<div class="container">
    <style>
      input[type=text], select {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      }

      input[type=submit] {
      width: 100%;
      background-color: #4CAF50;
      color: white;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      }

      input[type=submit]:hover {
      background-color: #45a049;
      }

      div {
      border-radius: 5px;
      background-color: #f2f2f2;
      padding: 20px;
      }
    </style>

    <form id="post-form" method="POST" action="checkview">
        {% csrf_token %}
        <label>Room Name</label>
        <input type="text" name="room_name" id="room_name" width="100px" />
        <label>Username</label>
        <input type="text" name="username" id="username" width="100px" />
        <input type="submit" value="Enter Room">
    </form>
    
    <h1>
        User :
        {{request.user.username}}
    </h1>
    <br><br>

    {% if user.is_authenticated %}
        <table>
            <tr>
                <td>
                        <h2>Liste de mes salons :</h2>
                    {% for room in roomList %}
                        {% if room.user1 == request.user.username or room.user2 == request.user.username %}
                            <ul id="li_room">
                                <h5></h5>
                                <li>{{room.name}}</li> : 
                                <a href="/{{room.name}}/?username={{request.user.username}}">{{room.name}} >{{room.id}}</a>
                            </ul>
                        {% endif %}
                    {% endfor %}
                </td>
                <td>
                        <h2>Liste des users :</h2>
                    {% for use in userList %}
                        {% if use.username != request.user.username %}
                            <ul>
                                <li>{{use}}</li> :
                                <a href="{% url 'createRoom' request.user.id use.id %}">discuter</a> 
                            </ul>
                        {% endif %}
                    {% endfor %}
                </td>
            </tr>
        </table>
    {% endif %}
    
</div>


{% endblock %}